\section{오일러의 $\phi$함수(Euler’s phi (totient) function) 상세히 }
\begin{dfn}[phi function]
    양의 정수 $n$에 대해서 

    $\phi (n)$ : 1부터 n까지의 양의 정수 중에 n과 서로소인 것의 개수를 나타내는 함수.    
\end{dfn}

$\phi (n)$은 다음의 성질이 있다.

\begin{theorem}
    \begin{itemize}
        \item{소수 $p$에 대해서  $\phi (p)=p-1$}
        
        \item{ m, n이 서로소인 양의 정수일 때, 다음이 성립한다. \[\phi (mn)=\phi (m)\phi (n)\]}
        
        \item 소수 $p$와 양의 정수 $\alpha$에 대해 다음이 성립한다.
        $$\phi(p^\alpha) = p^\alpha \left ( 1 - \frac{1}{p} \right )$$
        \end{itemize}
\end{theorem}

\begin{proof}

첫번째 성질은 어찌보면 당연하다 $p$는 소수이니 자기 자신을 제외한 모든 수와 서로소이다 (여기서 1도 세야한다.)


두번째 성질은 두수의 곱 $mn$은 각각 $m$에대해서 나눠지는 수가 $n$개이고 n에 대해서 나눠지는 수가 $m$개 이며 $mn$으로 나눠지는 수가 한 개이므로 
$mn -\dfrac{mn}{m}-\dfrac{mn}{n}+\dfrac{mn}{mn} =mn -m -n +1=(m-1)(n-1)=\phi (m)\phi(n)$가 된다.

세번째 성질 $p^\alpha$보다 같거나 작은 $p$의 배수가 되는것은 다음이 있다.
$$p , 2p , 3p , ... , p^{\alpha-1}p$$
따라서 총 $p^{\alpha-1}$개가 있고 
$ \phi(p^\alpha) =p^{\alpha} -  p^{\alpha-1} = p^\alpha \left ( 1 - \frac{1}{p} \right )$

\end{proof}

\begin{corollary}
    \emph{If $m_1, m_2, \ldots, m_k$ are $k$ positive
    integers which are prime each to each, then}
    \begin{equation*}
    \phi(m_1 m_2 \ldots m_k) = \phi(m_1) \phi(m_2) \ldots \phi(m_k).
    \end{equation*}
\end{corollary}


\emph{If $m = p_1^{\alpha_1} p_2^{\alpha_2} \ldots p_n^{\alpha_n}$
where $p_1, p_2, \ldots, p_n$ are different primes and $\alpha_1,
\alpha_2, \ldots, \alpha_n$ are positive integers, then}
\begin{equation*}
\phi(m) = m \left ( 1-\frac{1}{p_1} \right )
            \left ( 1-\frac{1}{p_2} \right )
            \ldots
            \left ( 1-\frac{1}{p_n} \right ).
\end{equation*}

For,
\begin{align*}
\phi(m) &= \phi(p_1^{\alpha_1}) \phi(p_2^{\alpha_2}) \ldots
             \phi(p_n^{\alpha_n}) \\
        &= p_1^{\alpha_1} \left ( 1-\frac{1}{p_1} \right )
             p_2^{\alpha_2} \left ( 1-\frac{1}{p_2} \right )
             \ldots
             p_n^{\alpha_n} \left ( 1-\frac{1}{p_n} \right ) \\
        &= m \left ( 1-\frac{1}{p_1} \right )
             \left ( 1-\frac{1}{p_2} \right )
             \ldots
             \left ( 1-\frac{1}{p_n} \right ).
\end{align*}



\section{오일러 정리(Euler's theorem)\protect\footnote{페르마의 소정리는 오일러 정리에서의 특수한 경우이다.}}

\begin{justbox}
    \begin{theorem}
        임의의 정수 a와 n이 서로소일 때, 다음이 성립한다.
        \[a^{\phi(n)} \bmod n = 1\]
    \end{theorem}
\end{justbox}

\begin{proof}
    
정수 n에 대해서 1부터 n까지의 양의 정수 중에 n과 서로소인 것의 집합을 생각해보자.
그러면 이는 집합
\begin{center}
    $A = \{ r_1 ,r_2,r_3, \cdots ,r_{\phi(n)}\}$\footnote{이러한 집합을 기약잉여계 $\mathbb Z_n^*$라고 부른다. 또한 집합 A의 원소의 갯수는 $\phi(n)$dl다.}
\end{center}
으로 나타낼 수 있다. 이 집합은 A라하고 이 각 원소에 n과 서로소인 a를 곱한 집합을 B집합이라 하자.
\[B = \{ ar_1 ,ar_2,ar_3, \cdots ,ar_{\phi(n)}\} \]
확실한건 $B$에 있는 모든 원소는 $n$과 서로소인 것이다. 
그럼 $B$집합의 각 원소를 $\bmod n$에 대해 계산한 것을 생각해보자.
 이는 각 원소의 나머지가 a를 곱하기전 값과 같은지는 모르지만 $\phi(n)$개에 대해서 각각 일대일대응이 가능 한다는것을 알수있다.
  \footnote{실제 증명은 귀류법을 통해서 증명할수있다.$ar_i  \equiv ar_j \bmod n $ 인 $1 \le i < j \le \phi(n)$ 이 존재한다고 가정해보자.}
따라서 $A$의 모든 원소를 곱한 값에 $\bmod n$을 한것과 $B$의 모든 원소를 곱한 값에 $\bmod n$을 한 값은 같다.
\[ar_1 \cdot ar_2 \cdot ar_3 \cdots ar_{\phi_{n}} \equiv r_1 \cdot r_2 \cdot r_3 \cdots r_{\phi_{n}} \pmod n\]
\[a^{\phi(n)}\bmod n= 1\]
\end{proof}


\begin{corollary}
    페르마의 소정리 :  소수 $p$에 대해 다음이 성립한다.
    $$ a^{p-1} \equiv 1 \pmod{p}$$
\end{corollary}

\begin{proof}
    $\phi(p)  = p-1 $이므로 오일러 정리에의해 성립합을 알 수 있다.
\end{proof}


\begin{equation*}
    a^{p-1} \equiv 1 \bmod p.
\end{equation*}
    
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%






\section{Carmichael function}


$\lambda(n)$ 다음을 만족하는 가장 작은 양의 정수 $m$

$a^m \equiv 1 \pmod{n}$

$n = p_1^{e_1} \cdots p_r^{e_r}$

$\lambda(n) = \text{lcm}(\phi(p_1^{e_1}), \ldots,\phi(p_r^{e_r}))$




Then let us write
\begin{gather}
a^{p-1} = 1 + hp. \tag{1} \\
\intertext{Raising each member of this equation to the
$p^{\text{th}}$ power we may write the result in the form}
a^{p(p-1)} = 1 + h_1p^2. \tag{2} \\
\intertext{where $h_1$ is an integer. Hence}
a^{p(p-1)} \equiv 1 \bmod p^2. \notag \\
\intertext{By raising each member of (2) to the $p^{\text{th}}$
power we can readily show that}
a^{p^2(p-1)} \equiv 1 \bmod p^3. \notag \\
\intertext{It is now easy to see that we shall have in general}
a^{p^{\alpha - 1}(p-1)} \equiv 1 \bmod p^{\alpha}. \notag \\
\intertext{where $\alpha$ is a positive integer; that is,}
a^{\phi(p^{\alpha})} \equiv 1 \bmod p^{\alpha}. \notag
\end{gather}


    
For the special case when $p$ is 2 this result can be extended. For
this case (1) becomes
\begin{gather}
a = 1 + 2h. \notag \\
\intertext{Squaring we have}
a^2 = 1 + 4h(h+1). \notag \\
\intertext{Hence,}
a^2 = 1+8h_1, \tag{3} \\
\intertext{where $h_1$ is an integer. Therefore}
a^2 \equiv 1 \bmod 2^3. \notag \\
\intertext{Squaring (3) we have}
a^{2^2} = 1 + 2^4h_2; \notag \\
\intertext{or}
a^{2^2} \equiv 1 \bmod 2^4. \notag \\
\intertext{It is now easy to see that we shall have in general}
a^{2^{\alpha-2}} \equiv 1 \bmod 2^{\alpha} \notag \\
\intertext{if $\alpha > 2$. That is,}
a^{\frac{1}{2}\phi(2^{\alpha})} \equiv 1 \bmod 2^{\alpha}
  \text{ if } a > 2.
\end{gather}

Now in terms of the $\phi$-function let us define a new function
$\lambda(m)$ as follows:
\begin{align*}
\lambda(2^{\alpha}) &= \phi(2^{\alpha}) \text{ if $a = 0, 1, 2$;} \\
\lambda(2^{\alpha}) &= \frac{1}{2}\phi(2^{\alpha})
                                               \text{ if $a > 2$;} \\
\lambda(p^{\alpha}) &= \phi(p^{\alpha})
                                   \text{ if $p$ is an odd prime;} \\
\lambda(2^{\alpha} p_1^{\alpha_1} p_2^{\alpha_2} \cdots p_n^{\alpha_n}) 
&= \text{lcm}(
    \lambda(2^{\alpha}),
    \lambda(p_1^{\alpha_1}),
    \lambda(p_2^{\alpha_2}), \ldots, \lambda(p_n^{\alpha_n}
    )
)
\end{align*}

$2, p_1, p_2, \ldots, p_n$ being different primes.%
\index{$\lambda(m)$}

Denote by $m$ the number
\begin{equation*}
m = 2^{\alpha}p_1^{\alpha_1}p_2^{\alpha_2} \cdots p_n^{\alpha_n}.
\end{equation*}
Let $a$ be any number prime to $m$. From our preceding results we
have
\begin{align*}
a^{\lambda(2^{\alpha})}     &\equiv 1 \bmod 2^{\alpha}, \\
a^{\lambda(p_1^{\alpha_1})} &\equiv 1 \bmod p_1^{\alpha_1},\\
a^{\lambda(p_2^{\alpha_2})} &\equiv 1 \bmod p_2^{\alpha_2}, \\
\ldots \\
a^{\lambda(p_n^{\alpha_n})} &\equiv 1 \bmod p_2^{\alpha_n}. \\
\end{align*}

Now any one of these congruences remains true if both of its members
are raised to the same positive integral power, whatever that power
may be. Then let us raise both members of the first congruence to
the power $\frac{\lambda(m)}{\lambda(2^\alpha)}$; both members of
the second congruence to the power
$\frac{\lambda(m)}{\lambda(p_1^{\alpha_1})}$; $\ldots$; both members
of the last congruence to the power
$\frac{\lambda(m)}{\lambda(p_n^{\alpha_n})}$. Then we have
\begin{align*}
a^{\lambda(m)} &\equiv 1 \mod 2^\alpha, \\
a^{\lambda(m)} &\equiv 1 \mod p_1^{\alpha_1}, \\
\ldots \ldots \\
a^{\lambda(m)} &\equiv 1 \mod p_n^{\alpha_n}. \\
\intertext{From these congruences we have immediately}
a^{\lambda(m)} &\equiv 1 \mod m.
\end{align*}

We may state this result in full in the following theorem:

\smallskip \emph{If $a$ and $m$ are any two relatively prime positive
integers, the congruence}
\begin{equation*}
a^{\lambda(m)} \equiv 1 \mod m.
\end{equation*}
\emph{is satisfied.}

As an excellent example to show the possible difference between the
exponent $\lambda(m)$ in this theorem and the exponent $\phi(m)$ in
Fermat's general theorem, let us take
\begin{gather*}
m = 2^6 \cdot 3^3 \cdot 5 \cdot 7 \cdot 13 \cdot 17 \cdot 19
        \cdot 37 \cdot 73. \\
\intertext{Here}
\lambda(m) = 2^4 \cdot 3^2, \quad \phi(m) = 2^{31} \cdot 3^{10}.
\end{gather*}

In a later chapter we shall show that there is no exponent $\nu$
less than $\lambda(m)$ for which the congruence
\begin{equation*}
a^\nu = 1 \mod m
\end{equation*}
is verified for every integer $a$ prime to $m$.

From our theorem, as stated above, Fermat's general theorem follows
as a corollary, since $\lambda(m)$ is obviously a factor of
$\phi(m)$,
\begin{equation*}
\phi(m) = \phi(2^\alpha) \phi(p_1^{\alpha_1}) \ldots
               \phi(p_n^{\alpha_n}).
\end{equation*}




http://www.gutenberg.org/files/13693/13693-pdf.pdf
    
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\textbf{31.8-2(CLRS)}

It is possible to strengthen Euler's theorem slightly to the form

$a^{\lambda(n)} \equiv 1 (\mod n)$ for all $a \in \mathbb Z_n^*$,

where $n = p_1^{e_1} \cdots p_r^{e_r}$ and $\lambda(n)$ is defined by

$$\lambda(n) = \text{lcm}(\phi(p_1^{e_1}), \ldots, \phi\phi(p_r^{e_r})). $$

Prove that $\lambda(n) \mid \phi(n)$. A composite number $n$ is a Carmichael number if $\lambda(n) \mid n - 1$. The smallest Carmichael number is $561 = 3 \cdot 11 \cdot 17$; here, $\lambda(n) = \text{lcm}(2, 10, 16) = 80$, which divides $560$. Prove that Carmichael numbers must be both "square-free" (not divisible by the square of any prime) and the product of at least three primes. (For this reason, they are not very common.)

ENG

\begin{enumerate}
    \item  Prove that $\lambda(n) \mid \phi(n)$.
    
    $n = p_1^{e_1} \cdots p_r^{e_r}$

    $ \phi(n) = \phi(p_1^{e_1})* \ldots*\phi(p_r^{e_r})$

    $\text{lcm}(\phi(p_1^{e_1}, \ldots, \phi(p_r^{e_r})) | (\phi(p_1^{e_1})* \ldots*\phi(p_r^{e_r}))$
    
    $\lambda(n) \mid \phi(n)$

    \item  Prove that Carmichael numbers must be both “square-free” (not divisible by the square of any prime) 

    let Carmichael number $n = p^\alpha m( \alpha \ge 2 ,  p \nmid m )$
    $a^{n-1} \equiv 1 \pmod{n} (\gcd(a,n) = 1)$
    
    set $a = p+1 $ then $(p+1)^{n} \equiv p+1 \pmod{n}$
    
    and $gcd(p^2,a) = 1$
    
    $(p+1)^{n} \equiv (p+1)^{p^2 p^{\alpha-2}} \equiv p+1 \pmod{p^2}$
    
    but $\gcd(p^2,a) = 1$,  $ a \equiv 1 \pmod{p^2}$
    
    $p+1 \equiv 1 \pmod{p^2}$ This is impossible
    
    https://math.stackexchange.com/questions/1764812/carmichael-number-square-free


    
    \item  the product of at least three primes. 
    
    Assume that $n=pq$, with $p<q$ two distinct primes, is a Carmichael number. 
    Then we have 
    $q≡1 \pmod{q−1} )\rightarrow n \equiv pq \equiv p \pmod{q−1}  \rightarrow n−1 \equiv p−1 \pmod{q−1}$
    Here $0 < p−1 < q−1$ , so $n−1$ is not divisible by $q−1$.

    
    https://math.stackexchange.com/questions/432162/carmichael-proof-of-at-least-3-factors

\end{enumerate}



KR

2. Prove that Carmichael numbers must be both “square-free” (not divisible by the square of any prime) 

https://math.stackexchange.com/questions/1764812/carmichael-number-square-free


\begin{proof}
카마이클 수 $n = p^\alpha m( \alpha \ge 2 ,  p \nmid m )$라 하자
정의에 따라 다음이 성립한다. 
$a^{n} \equiv a \pmod{n}$.

$ a \equiv 1 + p \pmod{p^\alpha}$ 라 하자.

$(p+1)^{n} \equiv p+1 \pmod{m}$이 되는데. 
$m$의 인자인 $p^2$와에 대해서도 다음이 성립한다.
$(p+1)^{n} \equiv (p+1)^{p^\alpha m} \equiv (p+1)^{p^2 p^{\alpha-2} m}  \equiv p+1 \pmod{p^2}$
그러나 $\gcd(a,n) = 1$ 이라서 $\gcd(a, p^2) = 1$이다.
$(p+1)^{n} \equiv p+1  \equiv 1 \pmod{p^2}$이며 이는 모순이다.
\end{proof}



3. the product of at least three primes. 

https://math.stackexchange.com/questions/432162/carmichael-proof-of-at-least-3-factors


Assume that $n=pq$, with $p<q$ two distinct primes, is a Carmichael number. 
Then we have 
$q≡1 \pmod{q−1} )\rightarrow n \equiv pq \equiv p \pmod{q−1}  \rightarrow n−1 \equiv p−1 \pmod{q−1}$
Here $0 < p−1 < q−1$ , so $n−1$ is not divisible by $q−1$.


%---------------------------------------------------------------------------------------------------------------------------

\section{advanced RSA}

https://crypto.stackexchange.com/questions/26751/rsa-with-lambdan-or-varphin

오리지널은 위와 같지만  PKCS#1 (en) v2.0에 표준 RSA 알고리즘 방식이 바뀌었다.
$\phi$ 대신 $\lambda$를 사용하는 방법이다.

Choosing $\lambda(n)$ rather than $\phi(n)$ may result in a smaller private exponent.


https://en.wikipedia.org/wiki/RSA_(cryptosystem)

https://simple.wikipedia.org/wiki/RSA_algorithm
